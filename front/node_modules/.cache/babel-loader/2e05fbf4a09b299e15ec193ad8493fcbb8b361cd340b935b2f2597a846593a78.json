{"ast":null,"code":"var _jsxFileName = \"/Users/zakialounas/Desktop/E\\u0301cole Multime\\u0301dia/Mybank/front/src/context/ExpensesContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport api from \"../axios/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExpensesContext = /*#__PURE__*/createContext();\nexport const useExpenses = () => {\n  _s();\n  return useContext(ExpensesContext);\n};\n\n/* ----------------------------------------------------------- */\n/*  Provider                                                    */\n/* ----------------------------------------------------------- */\n_s(useExpenses, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ExpensesProvider = ({\n  children\n}) => {\n  _s2();\n  const [expenses, setExpenses] = useState([]);\n\n  /* ---------- Chargement initial ---------- */\n  useEffect(() => {\n    // si l'header Authorization n'est pas encore prêt, on attend\n    if (!api.defaults.headers.common.Authorization) return;\n    api.get(\"/expenses\").then(({\n      data\n    }) => setExpenses(data[\"hydra:member\"] || [])).catch(console.error);\n  }, []);\n\n  /* ---------- CREATE ---------- */\n  const addExpense = async payload => {\n    const {\n      data\n    } = await api.post(\"/expenses\", payload);\n    setExpenses(prev => [...prev, data]);\n  };\n\n  /* ---------- UPDATE ---------- */\n  const updateExpense = async (id, payload) => {\n    const {\n      data\n    } = await api.put(`/expenses/${id}`, payload);\n    setExpenses(prev => prev.map(e => e.id === id ? data : e));\n  };\n\n  /* ---------- DELETE ---------- */\n  const deleteExpense = async id => {\n    await api.delete(`/expenses/${id}`);\n    setExpenses(prev => prev.filter(e => e.id !== id));\n  };\n  return /*#__PURE__*/_jsxDEV(ExpensesContext.Provider, {\n    value: {\n      expenses,\n      addExpense,\n      updateExpense,\n      deleteExpense\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s2(ExpensesProvider, \"XCaxB2DEspMpdgcH+IrrPBpyP4o=\");\n_c = ExpensesProvider;\nvar _c;\n$RefreshReg$(_c, \"ExpensesProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","api","jsxDEV","_jsxDEV","ExpensesContext","useExpenses","_s","ExpensesProvider","children","_s2","expenses","setExpenses","defaults","headers","common","Authorization","get","then","data","catch","console","error","addExpense","payload","post","prev","updateExpense","id","put","map","e","deleteExpense","delete","filter","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/zakialounas/Desktop/École Multimédia/Mybank/front/src/context/ExpensesContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport api from \"../axios/api\";\n\nconst ExpensesContext = createContext();\nexport const useExpenses = () => useContext(ExpensesContext);\n\n/* ----------------------------------------------------------- */\n/*  Provider                                                    */\n/* ----------------------------------------------------------- */\nexport const ExpensesProvider = ({ children }) => {\n  const [expenses, setExpenses] = useState([]);\n\n  /* ---------- Chargement initial ---------- */\n  useEffect(() => {\n    // si l'header Authorization n'est pas encore prêt, on attend\n    if (!api.defaults.headers.common.Authorization) return;\n\n    api\n      .get(\"/expenses\")\n      .then(({ data }) => setExpenses(data[\"hydra:member\"] || []))\n      .catch(console.error);\n  }, []);\n\n  /* ---------- CREATE ---------- */\n  const addExpense = async (payload) => {\n    const { data } = await api.post(\"/expenses\", payload);\n    setExpenses((prev) => [...prev, data]);\n  };\n\n  /* ---------- UPDATE ---------- */\n  const updateExpense = async (id, payload) => {\n    const { data } = await api.put(`/expenses/${id}`, payload);\n    setExpenses((prev) => prev.map((e) => (e.id === id ? data : e)));\n  };\n\n  /* ---------- DELETE ---------- */\n  const deleteExpense = async (id) => {\n    await api.delete(`/expenses/${id}`);\n    setExpenses((prev) => prev.filter((e) => e.id !== id));\n  };\n\n  return (\n    <ExpensesContext.Provider\n      value={{ expenses, addExpense, updateExpense, deleteExpense }}\n    >\n      {children}\n    </ExpensesContext.Provider>\n  );\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC7E,OAAOC,GAAG,MAAM,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/B,MAAMC,eAAe,gBAAGP,aAAa,CAAC,CAAC;AACvC,OAAO,MAAMQ,WAAW,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMR,UAAU,CAACM,eAAe,CAAC;AAAA;;AAE5D;AACA;AACA;AAAAE,EAAA,CAJaD,WAAW;AAKxB,OAAO,MAAME,gBAAgB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAChD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;;EAE5C;EACAD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACE,GAAG,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAACC,aAAa,EAAE;IAEhDd,GAAG,CACAe,GAAG,CAAC,WAAW,CAAC,CAChBC,IAAI,CAAC,CAAC;MAAEC;IAAK,CAAC,KAAKP,WAAW,CAACO,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC,CAC3DC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,UAAU,GAAG,MAAOC,OAAO,IAAK;IACpC,MAAM;MAAEL;IAAK,CAAC,GAAG,MAAMjB,GAAG,CAACuB,IAAI,CAAC,WAAW,EAAED,OAAO,CAAC;IACrDZ,WAAW,CAAEc,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEP,IAAI,CAAC,CAAC;EACxC,CAAC;;EAED;EACA,MAAMQ,aAAa,GAAG,MAAAA,CAAOC,EAAE,EAAEJ,OAAO,KAAK;IAC3C,MAAM;MAAEL;IAAK,CAAC,GAAG,MAAMjB,GAAG,CAAC2B,GAAG,CAAC,aAAaD,EAAE,EAAE,EAAEJ,OAAO,CAAC;IAC1DZ,WAAW,CAAEc,IAAI,IAAKA,IAAI,CAACI,GAAG,CAAEC,CAAC,IAAMA,CAAC,CAACH,EAAE,KAAKA,EAAE,GAAGT,IAAI,GAAGY,CAAE,CAAC,CAAC;EAClE,CAAC;;EAED;EACA,MAAMC,aAAa,GAAG,MAAOJ,EAAE,IAAK;IAClC,MAAM1B,GAAG,CAAC+B,MAAM,CAAC,aAAaL,EAAE,EAAE,CAAC;IACnChB,WAAW,CAAEc,IAAI,IAAKA,IAAI,CAACQ,MAAM,CAAEH,CAAC,IAAKA,CAAC,CAACH,EAAE,KAAKA,EAAE,CAAC,CAAC;EACxD,CAAC;EAED,oBACExB,OAAA,CAACC,eAAe,CAAC8B,QAAQ;IACvBC,KAAK,EAAE;MAAEzB,QAAQ;MAAEY,UAAU;MAAEI,aAAa;MAAEK;IAAc,CAAE;IAAAvB,QAAA,EAE7DA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAE/B,CAAC;AAAC9B,GAAA,CAvCWF,gBAAgB;AAAAiC,EAAA,GAAhBjC,gBAAgB;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}